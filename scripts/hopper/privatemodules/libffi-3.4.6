#%Module 1.0
#
# Sets up variables for my local install of libffi, for use with the
# 'environment-modules' package.
#
proc ModulesHelp { } {
    puts stderr "\tAdds local install of libffi to your environment variables,"
}

module-whatis "adds local install of libffi to your environment variables"

# author: kzhu4@gmu.edu
# this module was created to be used for building Python
# https://gitlab.orc.gmu.edu/kzhu4/neuromorphic_experiments/-/tree/master/scripts/hopper

# You can specify additional modules (if any) to be loaded before loading your
# custom module like shown below.
# Note: for python we don't need any additional module to be loaded beforehand.
#if ![is-loaded <some-required-module-name>] {
#       module load <some-required-module-name>
#}

# Add in required module(s) needed as prerequisite.
# We don't need any prerequisite module, this is just an example
#prereq <module_name>

# get the $HOME path from shell variables for this user
# https://wiki.tcl-lang.org/page/env
set HOME $::env(HOME)

# set package path
set LOCALPACKAGES $HOME/.local/packages/


# Add the path to the autoconf binaries
prepend-path PATH $LOCALPACKAGES/libffi-3.4.6/bin/

## Add the path to the autoconf libraries
prepend-path LD_LIBRARY_PATH $LOCALPACKAGES/libffi-3.4.6/lib64
prepend-path LD_LIBRARY_PATH $LOCALPACKAGES/libffi-3.4.6/lib
prepend-path PKG_CONFIG_PATH $LOCALPACKAGES/libffi-3.4.6/lib/pkgconfig

# these shouldn't be needed as the compiler should use the LD_LIBARY_PATH instead
#setenv LDFLAGS -L$HOME/.local/libffi-3.4.6/lib
#setenv CFLAGS -I$HOME/.local/libffi-3.4.6/include
